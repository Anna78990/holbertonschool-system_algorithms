It's too long, could you please separate the functions?(rb_insert_fixup):
/**
 * rb_insert_fixup - Fixes the Red-Black Tree properties after insertion
 * @tree: Double pointer to the root node of the Red-Black Tree
 * @node: Pointer to the newly inserted node
 */
void rb_insert_fixup(rb_tree_t **tree, rb_tree_t *node)
{
	rb_tree_t *parent, *grandparent, *uncle;

	while (node != *tree && node->color == RED && node->parent->color == RED)
	{
		parent = node->parent;
		grandparent = parent->parent;
		if (parent == grandparent->left)
		{
			uncle = grandparent->right;
			if (uncle != NULL && uncle->color == RED)
			{
				uncle->color = BLACK;
				parent->color = BLACK;
				grandparent->color = RED;
				node = grandparent;
			}
			else
			{
				if (node == parent->right)
				{
					rb_rotate_left(tree, parent);
					node = parent;
					parent = node->parent;
				}
				rb_rotate_right(tree, grandparent);
				parent->color = BLACK;
				grandparent->color = RED;
			}
		}
		else
		{
			uncle = grandparent->left;
			if (uncle != NULL && uncle->color == RED)
			{
				uncle->color = BLACK;
				parent->color = BLACK;
				grandparent->color = RED;
				node = grandparent;
			}
			else
			{
				if (node == parent->left)
				{
					rb_rotate_right(tree, parent);
					node = parent;
					parent = node->parent;
				}
				rb_rotate_left(tree, grandparent);
				parent->color = BLACK;
				grandparent->color = RED;
			}
		}
	}
	(*tree)->color = BLACK;
}

